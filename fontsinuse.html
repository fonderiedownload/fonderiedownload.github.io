<!DOCTYPE html>
<!-- fonderie.download V2 ? 2020
Special thanks to Romain for his help!!
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fonderie.download — Fonts in use</title>
    <meta name="description" content="fonderie.download type foundry, designing and distributing typefaces">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"/>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="font/font.css">
    <link rel="stylesheet" href="css/main-inuse.css">
    <script src="https://unpkg.com/colcade@0/colcade.js"></script>
    <script src="./assets.js"></script>
  </head>
  <body>
    <div id="header">
      <div id="textheader">
        <p>Here you can see what people dare to do with our fonts&thinsp;!</p>
        <p><a href="mailto:contact@fonderie.download">Send us a mail</a> if you want your work to be featured.</p>
      </div>
      <div id="tags">
        <button class="button-selected button-tags" id="button-all">All</button>
        <button class="button-tags" id="button-credible">Crédible</button>
        <button class="button-tags" id="button-garamondt">Garamon(d/t)</button>
        <button class="button-tags" id="button-quarantype">Quarantype</button>
        <button class="button-tags" id="button-tribalium">Tribalium</button>
        <button class="button-tags" id="button-zara">Zara</button>
      </div>
    </div>
    <div id="gallery" class="grid">
      <div class="grid-col grid-col--1"></div>
      <div class="grid-col grid-col--2"></div>
      <div class="grid-col grid-col--3"></div>
      <div class="grid-col grid-col--4"></div>
    </div>
    <div id="slidedeck" class="closed">
      <div id="slidedeck-flex-container">
        <div><span>&lt;</span></div>
        <div><img src="" alt="Current image" /><div></div></div>
        <div><span>&gt;</span></div>
      </div>
    </div>
    <div id="devant">
      <div class="menuContainer">
        <div id="actif" class="menuEntree"><a href="index.html" title="Home"><p>A</p></a></div><!--
        --><div class="menuEntree"><a href="zara.html" title="Zara typeface"><p>Z</p></a></div><!--
        --><div class="menuEntree"><a href="garamondt.html" title="Garamon(d/t) typeface"><p>G</p></a></div><!--
        --><div class="menuEntree"><a href="credible.html" title="Crédible typeface"><p>C</p></a></div><!--
        --><div class="menuEntree"><a href="tribalium.html" title="Tribalium typeface"><p>T</p></a></div><!--
        --><div class="menuEntreeLast"><a href="#" class="trigger" title="About"><p>E</p></a></div>
        </div>
        <div class="modal">
          <div class="modal-content">
            <span class="close-button">&times;</span>
            <img id="logofonderiedownload" src="img/logo.svg">
            <div id="textModal">
            <p>fonderie.download is your new favorite website. We design and distribute typefaces.<span style="font-size: 1.5vw; color:red;">¶</span></p>
            <p>All our fonts are released under the <a href="http://www.wtfpl.net/">WTFPL license</a>&thinsp;: it means that you can literally do</br><i>what the fuck</i> you want to with them.<span style="font-size: 1.5vw; color:red;">¶</span></p>
            <p>We are not kind enough to be on social media but you can drop us an email <a href="mailto:contact@fonderie.download">here</a>. We would be happy to see what you do with (y)our fonts.<span style="font-size: 1.5vw; color:red;">¶</span></p>
            <p>Also, subscribe to our newsletter if you don’t want to miss out on our next projects&thinsp;!<span style="font-size: 1.5vw; color:red;">¶</span></p>
            </div>
          <div id="newsletter">
            <div id="mc_embed_signup">
              <form action="https://download.us3.list-manage.com/subscribe/post?u=c1536a07aec224c6b1ab20429&amp;id=7e26788fee" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                <div id="mc_embed_signup_scroll">
                  <div class="mc-field-group">
	                   <label for="mce-EMAIL"><span style="font-family:'Crédible'; font-size:2.5vw;">*</span>&thinsp;&thinsp;Sign up to our newsletter&thinsp;&thinsp;<span style="font-family:'Crédible'; font-size:2.5vw;">*</span></label>
	                   <input type="email" placeholder="E-mail adress" name="EMAIL" class="required-email" id="mce-EMAIL" spellcheck="false">
                  </div>
                  <div id="mce-responses" class="clear">
		                  <div class="response" id="mce-error-response" style="display:none"></div>
                  		<div class="response" id="mce-success-response" style="display:none"></div>
                  </div>
                  <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_c1536a07aec224c6b1ab20429_7e26788fee" tabindex="-1" value=""></div>
                  <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
                </div>
              </form>
            </div><!--End mc_embed_signup-->
          </div><!--End newsletter-->
        </div><!--End modal-->
      </div><!--End menuContainer-->
      <div id="top">
        <img id="coinTopLeft" src="img/coin.png">
        <img id="mireMiddleTop" class="pad" src="img/mire.png">
        <img id="coinTopRight" src="img/coin.png">
        <img id="mireMiddleLeft" class="pad" src="img/mire.png">
        <img id="mireMiddleRight" class="pad" src="img/mire.png">
      </div>
      <div id="bottom">
        <img id="coinBottomLeft" src="img/coin.png">
        <img id="mireMiddleBottom" class="pad"src="img/mire.png">
        <img id="coinBottomRight" src="img/coin.png">
      </div>
    </div>
  </body>
  <script>

  var modal = document.querySelector(".modal");
  var trigger = document.querySelector(".trigger");
  var closeButton = document.querySelector(".close-button");

  function toggleModal(event) {
      event.preventDefault();
      modal.classList.toggle("show-modal");
  }

  function windowOnClick(event) {
      if (event.target === modal) {
          toggleModal(event);
      }
  }

  trigger.addEventListener("click", toggleModal);
  closeButton.addEventListener("click", toggleModal);
  window.addEventListener("click", windowOnClick);

  const slidedeck = document.querySelector('#slidedeck')
  slidedeck.addEventListener('click', closeSidedeck)

  function openSlidedeck(i) {
    const index = (i + window.slidedeckImages.length) % window.slidedeckImages.length // To avoid negative values
    slidedeck.dataset.index = index
    slidedeck.querySelector('img').setAttribute('src', window.slidedeckImages[index].path)
    slidedeck.querySelector('img + div').innerHTML = `Used font(s): ${(window.slidedeckImages[index].tags || []).join(', ')}`
    slidedeck.classList.toggle('closed', false)
  }

  function closeSidedeck(event) {
    console.log(event.target.nodeName)
    if (!['SPAN', 'IMG'].includes(event.target.nodeName)) slidedeck.classList.toggle('closed', true)
  }

  function prevImage() {
    openSlidedeck(parseInt(slidedeck.dataset.index, 10) - 1)
  }

  function nextImage() {
    openSlidedeck(parseInt(slidedeck.dataset.index, 10) + 1)
  }

  const leftArrow = slidedeck.querySelector('#slidedeck-flex-container > div:first-child span')
  leftArrow.addEventListener('click', prevImage)
  const rightArrow = slidedeck.querySelector('#slidedeck-flex-container > div:last-child span')
  rightArrow.addEventListener('click', nextImage)

  const gallery = document.querySelector('#gallery')
  var galleryFragment = document.createDocumentFragment();
  
  let allGalleryImages = []

  const displayGallery = (imagesToDisplay) => {
    window.slidedeckImages = imagesToDisplay
    allGalleryImages = []
    Array.from(gallery.querySelectorAll('img.grid-item')).forEach(el => el.parentElement.removeChild(el))
    const images = imagesToDisplay.forEach((imageDetails, i) => {
      const img = document.createElement('img')
      img.setAttribute('src', imageDetails.path)
      img.setAttribute('alt', 'An image')
      if (imageDetails.tags) img.dataset.tags = imageDetails.tags
      img.setAttribute('class', 'grid-item')
      img.addEventListener('click', () => openSlidedeck(i))
      allGalleryImages.push(img)
      galleryFragment.appendChild(img)
    })
    gallery.appendChild(galleryFragment)
    if (!window.colcade) {
      window.colcade = new Colcade( '#gallery', {
        columns: '.grid-col',
        items: '.grid-item'
      });
    }
    else {
      window.colcade.reload()
    }
  }
  displayGallery(window.images)

  const onTypoButtonClicked = (event, id) => {
    document.querySelector('.button-selected').classList.toggle('button-selected')
    event.target.classList.add('button-selected')
    const isAllButton = id === 'all'
    // allGalleryImages
    //   .filter(el => isAllButton || !('tags' in el.dataset) || !el.dataset.tags.match(id))
    //   .forEach(el => isAllButton ? el.classList.toggle('display-none', false) : el.classList.toggle('display-none'))
    if (isAllButton) displayGallery(window.images)
    else {
      displayGallery(window.images.filter(({tags}) => tags && tags.includes(id)))
    }
  }

  Array.from(document.querySelectorAll('[id^="button"]')).forEach(button => {
    const id = button.id.match(/button-(.*)/)[1]
    document.querySelector(`#button-${id}`).addEventListener('click', (e) => onTypoButtonClicked(e, id))
  })

  window.addEventListener('keydown', ({ keyCode }) => {
    if (slidedeck.classList.contains('closed')) return;
    switch (keyCode) {
      case 37: // left
        return prevImage();
      case 39: // right
        return nextImage();
      case 27: // esc
        return closeSidedeck({target: slidedeck});
      default:
    }
  })

  </script>
</html>

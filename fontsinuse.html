<!DOCTYPE html>
<!-- fonderie.download V2 ? 2020
Special thanks to Romain for his help!!
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>fonderie.download — Fonts in use</title>
    <meta name="description" content="Some artefacts using fonts designed by fonderie.download.">
    <link rel="apple-touch-icon" sizes="180x180" href="img/favicons/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicons/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicons/favicon-16x16.png">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0,user-scalable=0"/>
    <link rel="stylesheet" href="css/reset.css">
    <link rel="stylesheet" href="font/font.css">
    <link rel="stylesheet" href="css/common.css">
    <link rel="stylesheet" href="css/fontsinuse.css">
    <script src="js/colcade.js"></script>
    <script src="./assets.js"></script>
  </head>
  <body>
    <div id="common-template">
      <div class="menuContainer">
        <div class="menuEntree"><a href="index.html" title="Home"><p>A</p></a></div><!--
        --><div class="menuEntree"><a href="4fromages.html" title="4 Fromages typeface"><p>4</p></a></div><!--
        --><div class="menuEntree"><a href="credible.html" title="Crédible typeface"><p>C</p></a></div><!--
        --><div class="menuEntree"><a href="garamondt.html" title="Garamon(d/t) typeface"><p>G</p></a></div><!--
        --><div class="menuEntree"><a href="tribaliumneue.html" title="Tribalium Neue typeface"><p>T</p></a></div><!--
        --><div class="menuEntree"><a href="quarantype.html" title="Quarantype typeface"><p>Q</p></a></div><!--
        --><div class="menuEntree"><a href="zara.html" title="Zara typeface"><p>Z</p></a></div><!--
        --><div id="actif" class="menuEntree"><a href="fontsinuse.html" title="Fonts in use"><p>H</p></a></div><!--
        --><div class="menuEntreeLast"><a href="#" class="trigger" title="About"><p>E</p></a></div>
        </div>
        <div class="modal">
          <div class="modal-content">
            <span class="close-button">&times;</span>
            <img id="logofonderiedownload" src="img/logo.svg">
            <div id="textModal">
            <p>fonderie.download is your new favorite website. We design and distribute typefaces.<span style="font-size: 1.5vw; color:red;">¶</span></p>
            <p>All our fonts are released under the <a href="http://www.wtfpl.net/">WTFPL license</a>&thinsp;: it means that you can literally do</br><i>what the fuck</i> you want to with them.<span style="font-size: 1.5vw; color:red;">¶</span></p>
            <p>We are not kind enough to be on social media but you can drop us an email <a href="mailto:fonderie.download@gmail.com">here</a>. We are always happy to see what you do with (y)our fonts, so feel free to send us your work and we will show it on our <a href="fontsinuse.html"><i>fonts in use</i></a> page&thinsp;!<span style="font-size: 1.5vw; color:red;">¶</span></p>
            <p>Also, subscribe to our newsletter if you don’t want to miss out our next projects&thinsp;!<span style="font-size: 1.5vw; color:red;">¶</span></p>
            </div>
          <div id="newsletter">
            <div id="mc_embed_signup">
              <form action="https://download.us3.list-manage.com/subscribe/post?u=c1536a07aec224c6b1ab20429&amp;id=7e26788fee" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
                <div id="mc_embed_signup_scroll">
                  <div class="mc-field-group">
	                   <label for="mce-EMAIL"><span style="font-family:'Crédible'; font-size:2.5vw;">*</span>&thinsp;&thinsp;Sign up to our newsletter&thinsp;&thinsp;<span style="font-family:'Crédible'; font-size:2.5vw;">*</span></label>
	                   <input type="email" placeholder="E-mail adress" name="EMAIL" class="required-email" id="mce-EMAIL" spellcheck="false">
                  </div>
                  <div id="mce-responses" class="clear">
		                  <div class="response" id="mce-error-response" style="display:none"></div>
                  		<div class="response" id="mce-success-response" style="display:none"></div>
                  </div>
                  <div style="position: absolute; left: -5000px;" aria-hidden="true"><input type="text" name="b_c1536a07aec224c6b1ab20429_7e26788fee" tabindex="-1" value=""></div>
                  <div class="clear"><input type="submit" value="Subscribe" name="subscribe" id="mc-embedded-subscribe" class="button"></div>
                </div>
              </form>
            </div><!--End mc_embed_signup-->
          </div><!--End newsletter-->
          <div id="ps">P.S. We do not collect any data on this website.</div>
        </div><!--End modal-->
      </div><!--End menuContainer-->
      <div id="top">
        <img id="coinTopLeft" src="img/coin.png">
        <img id="mireMiddleTop" class="pad" src="img/mire.png">
        <img id="coinTopRight" src="img/coin.png">
        <img id="mireMiddleLeft" class="pad" src="img/mire.png">
        <img id="mireMiddleRight" class="pad" src="img/mire.png">
      </div>
      <div id="bottom">
        <img id="coinBottomLeft" src="img/coin.png">
        <img id="mireMiddleBottom" class="pad"src="img/mire.png">
        <img id="coinBottomRight" src="img/coin.png">
      </div>
    </div>
    <div id="header">
      <div id="textheader">
        <p>Here you can see what people dare to do with our fonts&thinsp;!</p>
        <p><a href="mailto:fonderie.download@gmail.com">Send us a mail</a> if you want your work to be featured.</p>
      </div>
      <div id="tags">
        <button class="button-selected button-tags" data-font="all">All</button>
        <button class="button-tags" data-font="4 fromages">4 Fromages</button>
        <button class="button-tags" data-font="Crédible">Crédible</button>
        <button class="button-tags" data-font="Garamon(d/t)">Garamon(d/t)</button>
        <button class="button-tags" data-font="Quarantype">Quarantype</button>
        <button class="button-tags" data-font="Tribalium">Tribalium</button>
        <button class="button-tags" data-font="Zara">Zara</button>
      </div>
    </div>
    <div id="gallery" class="grid">
      <div class="grid-col grid-col--1"></div>
      <div class="grid-col grid-col--2"></div>
      <div class="grid-col grid-col--3"></div>
      <div class="grid-col grid-col--4"></div>
    </div>
    <div id="slidedeck" class="closed">
      <div id="slidedeck-flex-container">
        <div><span>&lt;</span></div>
        <div><img src="" alt="No image" /><div></div></div>
        <div><span>&gt;</span></div>
      </div>
    </div>

  </body>
  <script>

  var modal = document.querySelector(".modal");
  var trigger = document.querySelector(".trigger");
  var closeButton = document.querySelector(".close-button");

  function toggleModal(event) {
      event.preventDefault();
      modal.classList.toggle("show-modal");
  }

  function windowOnClick(event) {
      if (event.target === modal) {
          toggleModal(event);
      }
  }

  trigger.addEventListener("click", toggleModal);
  closeButton.addEventListener("click", toggleModal);
  window.addEventListener("click", windowOnClick);

  const slidedeck = document.querySelector('#slidedeck')
  slidedeck.addEventListener('click', closeSidedeck)

  function openSlidedeck(i) {
    const index = (i + window.slidedeckImages.length) % window.slidedeckImages.length // To avoid negative values
    slidedeck.dataset.index = index
    const { path, title = '', author = '', tags = [] } = window.slidedeckImages[index]
    const image = slidedeck.querySelector('img')
    image.setAttribute('src', path)
    image.setAttribute('alt', title)
    slidedeck.querySelector('img + div').innerHTML = `${title} by ${author}<br />Used font(s): ${(tags).join(', ')}`
    slidedeck.classList.toggle('closed', false)
  }

  function closeSidedeck(event) {
    console.log(event.target.nodeName)
    if (!['SPAN', 'IMG'].includes(event.target.nodeName)) slidedeck.classList.toggle('closed', true)
  }

  function prevImage() {
    openSlidedeck(parseInt(slidedeck.dataset.index, 10) - 1)
  }

  function nextImage() {
    openSlidedeck(parseInt(slidedeck.dataset.index, 10) + 1)
  }

  const leftArrow = slidedeck.querySelector('#slidedeck-flex-container > div:first-child span')
  leftArrow.addEventListener('click', prevImage)
  const rightArrow = slidedeck.querySelector('#slidedeck-flex-container > div:last-child span')
  rightArrow.addEventListener('click', nextImage)

  const gallery = document.querySelector('#gallery')
  var galleryFragment = document.createDocumentFragment();

  let allGalleryImages = []

  const displayGallery = (imagesToDisplay) => {
    window.slidedeckImages = imagesToDisplay
    allGalleryImages = []
    Array.from(gallery.querySelectorAll('img.grid-item')).forEach(el => el.parentElement.removeChild(el))
    const images = imagesToDisplay.forEach((imageDetails, i) => {
      const img = document.createElement('img')
      img.setAttribute('src', imageDetails.path)
      img.setAttribute('alt', imageDetails.title)
      if (imageDetails.tags) img.dataset.tags = imageDetails.tags
      if (imageDetails.title) img.dataset.title = imageDetails.title
      if (imageDetails.author) img.dataset.author = imageDetails.author
      img.setAttribute('class', 'grid-item')
      img.addEventListener('click', () => openSlidedeck(i))
      allGalleryImages.push(img)
      galleryFragment.appendChild(img)
    })
    gallery.appendChild(galleryFragment)
    if (!window.colcade) {
      window.colcade = new Colcade( '#gallery', {
        columns: '.grid-col',
        items: '.grid-item'
      });
    }
    else {
      window.colcade.reload()
    }
  }
  displayGallery(window.images)

  const onTypoButtonClicked = (event, fontName) => {
    document.querySelector('.button-selected').classList.toggle('button-selected')
    event.target.classList.add('button-selected')
    const isAllButton = fontName === 'all'
    if (isAllButton) displayGallery(window.images)
    else {
      displayGallery(window.images.filter(({tags}) => tags && tags.includes(fontName)))
    }
  }

  Array.from(document.querySelectorAll('button[data-font]')).forEach(button => {
    const fontName = button.dataset.font
    button.addEventListener('click', (e) => onTypoButtonClicked(e, fontName))
  })

  window.addEventListener('keydown', ({ keyCode }) => {
    if (slidedeck.classList.contains('closed')) return;
    switch (keyCode) {
      case 37: // left
        return prevImage();
      case 39: // right
        return nextImage();
      case 27: // esc
        return closeSidedeck({target: slidedeck});
      default:
    }
  })

  </script>
</html>
